# üîç –ê–Ω–∞–ª–∏–∑ Workflow –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 2025-10-21  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ –ª–æ–≥–∏—á–Ω–æ

---

## üìä –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä workflow –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å –ø–ª–∞–≥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –Ω–æ–¥ (Node Handlers Registry) –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç React Flow –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏.

---

## ‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã –Ω–æ–¥

### 1Ô∏è‚É£ **–¢—Ä–∏–≥–≥–µ—Ä—ã** (3 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞)
| –¢–∏–ø –Ω–æ–¥—ã | Handler | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|---------|--------|----------|
| `trigger.command` | CommandTriggerHandler | ‚úÖ | –¢—Ä–∏–≥–≥–µ—Ä –ø–æ –∫–æ–º–∞–Ω–¥–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä `/start`) |
| `trigger.message` | MessageTriggerHandler | ‚úÖ | –¢—Ä–∏–≥–≥–µ—Ä –ø–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é |
| `trigger.callback` | CallbackTriggerHandler | ‚úÖ | –¢—Ä–∏–≥–≥–µ—Ä –ø–æ callback –æ—Ç inline –∫–Ω–æ–ø–æ–∫ |

### 2Ô∏è‚É£ **–°–æ–æ–±—â–µ–Ω–∏—è** (8 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)
| –¢–∏–ø –Ω–æ–¥—ã | Handler | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|---------|--------|----------|
| `message` | MessageHandler | ‚úÖ | –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è |
| `message.keyboard.inline` | InlineKeyboardHandler | ‚ö†Ô∏è | Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (–µ—Å—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∞) |
| `message.keyboard.reply` | ReplyKeyboardHandler | ‚ö†Ô∏è | Reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (–µ—Å—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∞) |
| `message.photo` | PhotoMessageHandler | ‚ö†Ô∏è | –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ (–µ—Å—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∞) |
| `message.video` | VideoMessageHandler | ‚ö†Ô∏è | –û—Ç–ø—Ä–∞–≤–∫–∞ –≤–∏–¥–µ–æ (–µ—Å—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∞) |
| `message.document` | DocumentMessageHandler | ‚ö†Ô∏è | –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–µ—Å—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∞) |
| `message.edit` | EditMessageHandler | ‚ö†Ô∏è | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–µ—Å—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∞) |
| `message.delete` | DeleteMessageHandler | ‚ö†Ô∏è | –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–µ—Å—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∞) |

### 3Ô∏è‚É£ **–î–µ–π—Å—Ç–≤–∏—è** (3 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞)
| –¢–∏–ø –Ω–æ–¥—ã | Handler | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|---------|--------|----------|
| `action.database_query` | DatabaseQueryHandler | ‚úÖ | –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã (whitelist) |
| `action.set_variable` | SetVariableHandler | ‚úÖ | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π |
| `action.get_variable` | GetVariableHandler | ‚úÖ | –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π |

### 4Ô∏è‚É£ **–£—Å–ª–æ–≤–∏—è** (2 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞)
| –¢–∏–ø –Ω–æ–¥—ã | Handler | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|---------|--------|----------|
| `condition` | ConditionHandler | ‚úÖ | –£—Å–ª–æ–≤–Ω–æ–µ –≤–µ—Ç–≤–ª–µ–Ω–∏–µ |
| `flow.switch` | SwitchHandler | ‚ö†Ô∏è | Switch-case (–µ—Å—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∞) |

### 5Ô∏è‚É£ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–º** (5 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)
| –¢–∏–ø –Ω–æ–¥—ã | Handler | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|---------|--------|----------|
| `flow.delay` | DelayFlowHandler | ‚úÖ | –ó–∞–¥–µ—Ä–∂–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è |
| `flow.end` | EndFlowHandler | ‚úÖ | –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ workflow |
| `flow.loop` | LoopFlowHandler | ‚úÖ | –¶–∏–∫–ª—ã (count, foreach, while) |
| `flow.sub_workflow` | SubWorkflowFlowHandler | ‚úÖ | –í—ã–∑–æ–≤ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ workflow |
| `flow.jump` | JumpFlowHandler | ‚úÖ | –ü–µ—Ä–µ—Ö–æ–¥ –∫ –¥—Ä—É–≥–æ–π –Ω–æ–¥–µ |

---

## üé® UI –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–æ–¥—ã –≤ —Ç—É–ª–±–∞—Ä–µ (8 —Ç–∏–ø–æ–≤ –¥–ª—è MVP)
1. ‚úÖ **–ö–æ–º–∞–Ω–¥–∞** (`trigger.command`) - –∑–µ–ª–µ–Ω—ã–π
2. ‚úÖ **–°–æ–æ–±—â–µ–Ω–∏–µ** (`message`) - —Å–∏–Ω–∏–π
3. ‚úÖ **–£—Å–ª–æ–≤–∏–µ** (`condition`) - –æ—Ä–∞–Ω–∂–µ–≤—ã–π
4. ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** (`action.database_query`) - —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π
5. ‚úÖ **–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è** (`action.set_variable`) - —Ä–æ–∑–æ–≤—ã–π
6. ‚úÖ **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** (`action.send_notification`) - –æ—Ä–∞–Ω–∂–µ–≤—ã–π
7. ‚úÖ **–ó–∞–¥–µ—Ä–∂–∫–∞** (`flow.delay`) - –∂–µ–ª—Ç—ã–π
8. ‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ** (`flow.end`) - —Å–µ—Ä—ã–π

### React Flow Node Components
| –¢–∏–ø –Ω–æ–¥—ã | React Component | –°—Ç–∞—Ç—É—Å |
|----------|-----------------|--------|
| –¢—Ä–∏–≥–≥–µ—Ä—ã | TriggerNode | ‚úÖ |
| –°–æ–æ–±—â–µ–Ω–∏—è | MessageNode | ‚úÖ |
| –£—Å–ª–æ–≤–∏—è | ConditionNode | ‚úÖ |
| –î–µ–π—Å—Ç–≤–∏—è | ActionNode | ‚úÖ |
| –ó–∞–¥–µ—Ä–∂–∫–∞ | DelayNode | ‚úÖ |
| –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ | EndNode | ‚úÖ |

---

## ‚ö†Ô∏è –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–æ–≤ –Ω–æ–¥ –≤ TypeScript

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ handler –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–∏–ø—ã –Ω–æ–¥, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `WorkflowNodeType`.

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ handler'—ã:**
- `InlineKeyboardHandler` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `'message.keyboard.inline'` (—Å—Ç—Ä–æ–∫–∞ 51)
- `ReplyKeyboardHandler` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `'message.keyboard.reply'` (—Å—Ç—Ä–æ–∫–∞ 285)
- `PhotoMessageHandler` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `'message.photo'` (—Å—Ç—Ä–æ–∫–∞ 35)
- `VideoMessageHandler` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `'message.video'` (—Å—Ç—Ä–æ–∫–∞ 158)
- `DocumentMessageHandler` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `'message.document'` (—Å—Ç—Ä–æ–∫–∞ 265)
- `EditMessageHandler` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `'message.edit'` (—Å—Ç—Ä–æ–∫–∞ 354)
- `DeleteMessageHandler` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `'message.delete'` (—Å—Ç—Ä–æ–∫–∞ 434)
- `SwitchHandler` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `'flow.switch'` (—Å—Ç—Ä–æ–∫–∞ 41)

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å —ç—Ç–∏ —Ç–∏–ø—ã –≤ `WorkflowNodeType` –∏–ª–∏ –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏.

### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö action handlers –≤ UI

**–ü—Ä–æ–±–ª–µ–º–∞:** –í —Ç—É–ª–±–∞—Ä–µ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ 3 action —Ç–∏–ø–∞, –Ω–æ –≤ —Ä–µ–µ—Å—Ç—Ä–µ –∏—Ö –±–æ–ª—å—à–µ.

**–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ UI:**
- `action.api_request`
- `action.get_variable`
- `action.check_user_linked`
- `action.find_user_by_contact`
- `action.link_telegram_account`
- `action.get_user_balance`

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –†–∞—Å—à–∏—Ä–∏—Ç—å —Ç—É–ª–±–∞—Ä –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–µ–Ω—é.

### 3. –ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ç–∏–ø—ã –≤ Node Registry

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `node-handlers-registry.ts` –µ—Å—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ç–∏–ø–æ–≤ (—Å—Ç—Ä–æ–∫–∞ 33-48), –Ω–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö –Ω–µ –∏–º–µ—é—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:

**–ë–µ–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:**
- `trigger.webhook`
- `trigger.email`
- `action.api_request`
- `action.send_notification`
- `action.check_user_linked`
- `action.find_user_by_contact`
- `action.link_telegram_account`
- `action.get_user_balance`
- `integration.webhook`
- `integration.analytics`

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ handlers
- ‚úÖ –ü–ª–∞–≥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —á–µ—Ä–µ–∑ Registry
- ‚úÖ –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å `BaseNodeHandler` –¥–ª—è –æ–±—â–µ–π –ª–æ–≥–∏–∫–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –Ω–æ–¥
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

### 2. Execution Context
- ‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
- ‚úÖ Telegram –∫–æ–Ω—Ç–µ–∫—Å—Ç
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ (db, http)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ —à–∞–≥–∞–º (–∑–∞—â–∏—Ç–∞ –æ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤)

### 3. Workflow Management
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è workflows
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è
- ‚úÖ Drag & Drop –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–¥
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –Ω–∞ React Flow

### 4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ Database Query Handler –∏—Å–ø–æ–ª—å–∑—É–µ—Ç whitelist –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏—Ç–µ—Ä–∞—Ü–∏–π –≤ —Ü–∏–∫–ª–∞—Ö
- ‚úÖ Timeout –¥–ª—è workflow

### 5. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 4 scope: global, project, user, session
- ‚úÖ TTL –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ Cleanup –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è expired –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### 6. –£—Å–ª–æ–≤–∏—è –∏ —Ü–∏–∫–ª—ã
- ‚úÖ Expression evaluator –¥–ª—è —É—Å–ª–æ–≤–∏–π
- ‚úÖ 3 —Ç–∏–ø–∞ —Ü–∏–∫–ª–æ–≤: count, foreach, while
- ‚úÖ Break conditions
- ‚úÖ Iterator variables
- ‚úÖ Switch-case –ª–æ–≥–∏–∫–∞

---

## üéØ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –Ω–æ–¥

### –¢—Ä–∏–≥–≥–µ—Ä—ã
**–õ–æ–≥–∏–∫–∞:** –û–ø—Ä–µ–¥–µ–ª—è—é—Ç —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –≤ workflow. –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—é—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–π –Ω–æ–¥–µ.
- ‚úÖ –†–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

### Message Node
**–õ–æ–≥–∏–∫–∞:** 
1. –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å —Ç–µ–∫—Å—Ç–æ–º –∏ keyboard
2. –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Ç–µ–∫—Å—Ç
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram API
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–µ–¥—É—é—â—É—é –Ω–æ–¥—É

- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ markdown/HTML
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ attachments

### Condition Node
**–õ–æ–≥–∏–∫–∞:**
1. –ü–æ–ª—É—á–∞–µ—Ç expression –∏–ª–∏ —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç (variable + operator + value)
2. –í—ã—á–∏—Å–ª—è–µ—Ç —É—Å–ª–æ–≤–∏–µ —á–µ—Ä–µ–∑ ConditionEvaluator
3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –≤–µ—Ç–∫—É (true/false)

- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### Action Nodes
**–õ–æ–≥–∏–∫–∞:**
- DatabaseQuery: –≤—ã–ø–æ–ª–Ω—è–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- SetVariable: —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å scope –∏ TTL
- GetVariable: –ø–æ–ª—É—á–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å fallback

- ‚úÖ –†–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∞

### Flow Control Nodes
**Delay:**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ setTimeout –∏–ª–∏ delay –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

**Loop:**
- ‚úÖ 3 —Ç–∏–ø–∞ —Ü–∏–∫–ª–æ–≤
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤
- ‚úÖ Break conditions

**End:**
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç workflow
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ success/error —Å—Ç–∞—Ç—É—Å–æ–≤

**Jump:**
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –∫ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–π –Ω–æ–¥–µ
- ‚úÖ –£—Å–ª–æ–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥

**SubWorkflow:**
- ‚úÖ –í—ã–∑–æ–≤ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö workflow
- ‚úÖ Input/Output mapping –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

---

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### –ö—Ä–∏—Ç–∏—á–Ω–æ (–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å)
1. ‚ùó –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ç–∏–ø—ã –≤ `WorkflowNodeType`:
   ```typescript
   | 'message.keyboard.inline' | 'message.keyboard.reply'
   | 'message.photo' | 'message.video' | 'message.document'
   | 'message.edit' | 'message.delete'
   | 'flow.switch'
   ```

2. ‚ùó –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ handlers:
   - `action.api_request` - HTTP –∑–∞–ø—Ä–æ—Å—ã
   - `action.send_notification` - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - `action.check_user_linked` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - `action.find_user_by_contact` - –ü–æ–∏—Å–∫ –ø–æ –∫–æ–Ω—Ç–∞–∫—Ç—É
   - `action.link_telegram_account` - –ü—Ä–∏–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞
   - `action.get_user_balance` - –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
   - `trigger.webhook` - Webhook —Ç—Ä–∏–≥–≥–µ—Ä
   - `integration.webhook` - Webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
   - `integration.analytics` - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ
3. üîß –†–∞—Å—à–∏—Ä–∏—Ç—å UI —Ç—É–ª–±–∞—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏:
   - –¢—Ä–∏–≥–≥–µ—Ä—ã (—Ä–∞—Å–∫—Ä—ã–≤–∞—é—â–µ–µ—Å—è –º–µ–Ω—é)
   - –°–æ–æ–±—â–µ–Ω–∏—è (–∫–∞—Ç–µ–≥–æ—Ä–∏—è)
   - –î–µ–π—Å—Ç–≤–∏—è (–∫–∞—Ç–µ–≥–æ—Ä–∏—è)
   - –£—Å–ª–æ–≤–∏—è
   - –ü–æ—Ç–æ–∫

4. üîß –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é connections:
   - –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Ç—Ä–∏–≥–≥–µ—Ä - –ø–µ—Ä–≤–∞—è –Ω–æ–¥–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ orphan nodes

5. üîß –£–ª—É—á—à–∏—Ç—å UX:
   - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –û—Ç–ª–∞–¥—á–∏–∫ —Å breakpoints
   - –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π

---

## üé¨ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### ‚úÖ –û–±—â–∏–π –≤–µ—Ä–¥–∏–∫—Ç: **–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ –ª–æ–≥–∏—á–Ω–æ**

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –ø–ª–∞–≥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (whitelist queries, –≤–∞–ª–∏–¥–∞—Ü–∏—è)
- –ì–∏–±–∫–æ—Å—Ç—å (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —É—Å–ª–æ–≤–∏—è, —Ü–∏–∫–ª—ã)
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å (–ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ handlers)
- –•–æ—Ä–æ—à–∏–π UX –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ (drag & drop, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è)

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å:**
- –ü—Ä–∏–≤–µ—Å—Ç–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø—ã TypeScript
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ handlers –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- –†–∞—Å—à–∏—Ä–∏—Ç—å UI –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫–æ –≤—Å–µ–º —Ç–∏–ø–∞–º –Ω–æ–¥

**–û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞:** 8.5/10
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: 10/10 ‚úÖ
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: 9/10 ‚úÖ
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å: 7/10 ‚ö†Ô∏è (–Ω–µ –≤—Å–µ handlers —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã)
- UX: 8/10 ‚úÖ
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 9/10 ‚úÖ

---

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å TypeScript errors
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ handlers
3. –†–∞—Å—à–∏—Ä–∏—Ç—å UI —Ç—É–ª–±–∞—Ä
4. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö handlers
5. –°–æ–∑–¥–∞—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–π –æ—Ç–ª–∞–¥—á–∏–∫

