# üìã –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á ‚Äî –∞–∫—Ç—É–∞–ª—å–Ω–æ –Ω–∞ 2025-09-17

–ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–±–æ—Ç. –ë–æ–ª—å—à–∞—è —á–∞—Å—Ç—å –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ —Å–ø–∏—Å–∫–∞ —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ (—Ä–µ–¥–∏—Ä–µ–∫—Ç—ã, –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è, Tilda, rate limiting, UI-—Ñ–∏–∫—Å—ã). –ù–∏–∂–µ ‚Äî —Ç–æ–ª—å–∫–æ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –∑–∞–¥–∞—á–∏.

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ

### 1) Prisma: —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å Telegram ID –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞
- –ü—Ä–∏–≤–µ—Å—Ç–∏ `prisma/schema.prisma` –∫ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º –º–∏–≥—Ä–∞—Ü–∏—è–º: —É–±—Ä–∞—Ç—å `@unique` —É –ø–æ–ª—è `User.telegramId` –∏ –¥–æ–±–∞–≤–∏—Ç—å `@@unique([projectId, telegramId])`.
- –ü—Ä–æ–≥–Ω–∞—Ç—å `npx prisma validate && npx prisma generate`.
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö.

–û—Ü–µ–Ω–∫–∞: 20‚Äì30 –º–∏–Ω—É—Ç

### 2) –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è (API + UI)
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `POST /api/auth/forgot-password` (zod-–≤–∞–ª–∏–¥–∞—Ü–∏—è, rate limit, –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –æ—Ç–≤–µ—Ç).
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Ñ–æ—Ä–º–æ–π `src/features/auth/components/forgot-password-view.tsx`.
- E-mail –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–∫–∞ —á–µ—Ä–µ–∑ –∑–∞–≥–ª—É—à–∫—É/–ª–æ–≥–≥–µ—Ä, —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º –ø–µ—Ä–µ–Ω–æ—Å–æ–º –≤ `NotificationService`.

–û—Ü–µ–Ω–∫–∞: 1‚Äì2 —á–∞—Å–∞

## üß© –í–∞–∂–Ω—ã–µ

### 3) NotificationService: –∫–∞–Ω–∞–ª—ã –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É Email/SMS/Push (–ø–æ–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã-–∑–∞–≥–ª—É—à–∫–∏, –∫–æ–Ω—Ñ–∏–≥ —á–µ—Ä–µ–∑ ENV).
- –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫/—à–∞–±–ª–æ–Ω–æ–≤/–ª–æ–≥–æ–≤ –∏–∑ –ë–î; –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å—Ö–µ–º—É (templates, settings, logs).
- –ü—Ä–∏–≤–µ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∫ —Ç–µ–∫—É—â–∏–º —Ç–∏–ø–∞–º `Notification*`.

–û—Ü–µ–Ω–∫–∞: 4‚Äì6 —á–∞—Å–æ–≤

### 4) –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥
- –í `ReferralService.getReferralStats` –ø–æ—Å—á–∏—Ç–∞—Ç—å: `periodReferrals`, `periodBonusPaid`, `averageOrderValue`.
- –°–æ–±—Ä–∞—Ç—å `utmSources`. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å—Ö–µ–º—É (–∞–≥—Ä–µ–≥–∞—Ç—ã/–∏–Ω–¥–µ–∫—Å—ã).

–û—Ü–µ–Ω–∫–∞: 2‚Äì4 —á–∞—Å–∞

### 5) Redis-–∫—ç—à –∏ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è
- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –∫—ç—à–∞ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–ø–æ–º–µ—Ç–∫–∞ –≤ `webhook.queue.ts`).
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞—Ç—å –∫–ª—é—á–∏ –∏ TTL, fallback –≤ dev.

–û—Ü–µ–Ω–∫–∞: 1‚Äì2 —á–∞—Å–∞

## ‚öôÔ∏è –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

### 6) –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Telegram –±–æ—Ç–µ
- –ó–∞–º–µ–Ω–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è `// TODO: –ª–æ–≥–≥–µ—Ä` –Ω–∞ `logger.*` –≤ `src/lib/telegram/bot.ts` –∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö.

–û—Ü–µ–Ω–∫–∞: 30‚Äì45 –º–∏–Ω—É—Ç

### 7) Sentry: –∑–Ω–∞—á–µ–Ω–∏—è org/project –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å `NEXT_PUBLIC_SENTRY_ORG` –∏ `NEXT_PUBLIC_SENTRY_PROJECT`.
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å `NEXT_PUBLIC_SENTRY_DISABLED`.

–û—Ü–µ–Ω–∫–∞: 15‚Äì20 –º–∏–Ω—É—Ç

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 8) –û–±–Ω–æ–≤–∏—Ç—å API-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- –°–≤–µ—Ä–∏—Ç—å `docs/api.md` —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ —Ä–æ—É—Ç–∞–º–∏ (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –æ—Ç–≤–µ—Ç—ã, rate-limit –∑–∞–≥–æ–ª–æ–≤–∫–∏).

–û—Ü–µ–Ω–∫–∞: 30‚Äì45 –º–∏–Ω—É—Ç

### 9) –ß–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö TODO –≤ README —Ñ–∏—á
- –í `src/features/bonuses/README.md` —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –±–ª–æ–∫ TODO –ø–æ–¥ —Ç–µ–∫—É—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (–ë–î —É–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞, —É—Ç–æ—á–Ω–∏—Ç—å –ø–ª–∞–Ω—ã –ø–æ –∫–∞–Ω–∞–ª–∞–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ).

–û—Ü–µ–Ω–∫–∞: 15‚Äì20 –º–∏–Ω—É—Ç

## üß™ –¢–µ—Å—Ç—ã

### 10) –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –¢–µ—Å—Ç –Ω–∞ –∫–æ–º–ø–æ–∑–∏—Ç–Ω—É—é —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å `(projectId, telegramId)`.
- –¢–µ—Å—Ç –Ω–∞ `forgot-password` (–≤–∞–ª–∏–¥–Ω—ã–µ/–Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ e-mail, –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã, rate limit).
- –¢–µ—Å—Ç—ã —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥.

–û—Ü–µ–Ω–∫–∞: 2‚Äì3 —á–∞—Å–∞

---

–ò—Ç–æ–≥–æ –æ—Ä–∏–µ–Ω—Ç–∏—Ä: 10‚Äì15 —á–∞—Å–æ–≤ –Ω–∞ –±–ª–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á (–±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–æ—á—Ç–æ–≤–æ–≥–æ/SMS –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞). –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Å—Ö–µ–º—ã –ë–î ‚Äî +1‚Äì2 —á–∞—Å–∞.