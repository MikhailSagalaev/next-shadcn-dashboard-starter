# üöÄ –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–Ω–æ–ø–æ–∫ (–∫–∞–∫ —É –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤)

**–î–∞—Ç–∞:** 2025-10-14  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

---

## üéØ **–î–û –∏ –ü–û–°–õ–ï**

### ‚ùå **–ë–´–õ–û: –ú–Ω–æ–≥–æ –Ω–æ–¥**

```
start ‚Üí welcome-message
          ‚Üì
       trigger.contact
          ‚Üì
       check-user
          ‚Üì
       condition
        /     \
   create   existing
     ‚Üì         ‚Üì
   bonus    message
     ‚Üì
  message
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- 10+ –Ω–æ–¥ –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è
- –°–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å flow
- –¢—Ä–∏–≥–≥–µ—Ä—ã –∑–∞–Ω–∏–º–∞—é—Ç –º–µ—Å—Ç–æ

---

### ‚úÖ **–°–¢–ê–õ–û: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**

```
start ‚Üí welcome-message
          [–ö–Ω–æ–ø–∫–∞ —Å actions –≤–Ω—É—Ç—Ä–∏]
            1. check-user
            2. if (new) {
                 create-user
                 add-bonus
                 send-message
               } else {
                 send-message
               }
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –í—Å–µ–≥–æ 2 –Ω–æ–¥—ã!
- –ü–æ–Ω—è—Ç–Ω—ã–π flow
- –ö–∞–∫ —É –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤

---

## üìù **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π**

```json
{
  "text": "üì± –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä–æ–º",
  "request_contact": true,
  "actions": [
    {
      "id": "step-1",
      "type": "database_query",
      "query": "check_user",
      "parameters": {
        "telegramId": "{{telegram.userId}}"
      },
      "assignTo": "user"
    },
    {
      "id": "step-2",
      "type": "condition",
      "variable": "user",
      "operator": "is_empty",
      "true_actions": [
        {
          "type": "database_query",
          "query": "create_user"
        },
        {
          "type": "send_message",
          "text": "‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
        }
      ],
      "false_actions": [
        {
          "type": "send_message",
          "text": "üëã –° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º!"
        }
      ]
    }
  ]
}
```

---

## üîß **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π**

### **1. database_query**
```json
{
  "type": "database_query",
  "query": "check_user_by_telegram",
  "parameters": {
    "telegramId": "{{telegram.userId}}"
  },
  "assignTo": "user"
}
```

### **2. send_message**
```json
{
  "type": "send_message",
  "text": "–ü—Ä–∏–≤–µ—Ç, {{telegram.first_name}}!",
  "parse_mode": "HTML"
}
```

### **3. condition**
```json
{
  "type": "condition",
  "variable": "user",
  "operator": "is_empty",
  "true_actions": [...],
  "false_actions": [...]
}
```

### **4. set_variable**
```json
{
  "type": "set_variable",
  "key": "balance",
  "value": "{{user.balance}}"
}
```

### **5. delay**
```json
{
  "type": "delay",
  "seconds": 2
}
```

---

## üìä **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞–º–∏**

| –§—É–Ω–∫—Ü–∏—è | –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç | –ù–∞—à –ø—Ä–æ–µ–∫—Ç (–î–û) | –ù–∞—à –ø—Ä–æ–µ–∫—Ç (–ü–û–°–õ–ï) |
|---------|-----------|-----------------|---------------------|
| –ö–Ω–æ–ø–∫–∏ —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏ | ‚úÖ | ‚ùå | ‚úÖ |
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–¥ | 2-3 | 10+ | 2-3 |
| –£—Å–ª–æ–≤–∏—è –≤–Ω—É—Ç—Ä–∏ | ‚úÖ | ‚ùå | ‚úÖ |
| –ë–î –∑–∞–ø—Ä–æ—Å—ã | ‚úÖ | –û—Ç–¥–µ–ª—å–Ω—ã–µ –Ω–æ–¥—ã | ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ |
| –ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å | ‚úÖ | ‚ö†Ô∏è –°–ª–æ–∂–Ω–æ | ‚úÖ |

---

## üöÄ **–ü—Ä–∏–º–µ—Ä: –°–∏—Å—Ç–µ–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏**

**–§–∞–π–ª:** `–°–∏—Å—Ç–µ–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –£–ü–†–û–©–Å–ù–ù–ê–Ø.json`

```json
{
  "nodes": [
    {
      "id": "start-trigger",
      "type": "trigger.command"
    },
    {
      "id": "welcome-message",
      "type": "message.keyboard.reply",
      "config": {
        "keyboard": [
          [
            {
              "text": "üì± –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä–æ–º",
              "request_contact": true,
              "actions": [
                // –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                {
                  "type": "database_query",
                  "query": "check_user_by_telegram"
                },
                // –®–∞–≥ 2: –£—Å–ª–æ–≤–∏–µ
                {
                  "type": "condition",
                  "variable": "existingUser",
                  "operator": "is_empty",
                  "true_actions": [
                    // –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
                    { "type": "database_query", "query": "create_user" },
                    { "type": "database_query", "query": "add_bonus" },
                    { "type": "send_message", "text": "‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è!" }
                  ],
                  "false_actions": [
                    // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
                    { "type": "send_message", "text": "üëã –° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º!" }
                  ]
                }
              ]
            }
          ]
        ]
      }
    }
  ]
}
```

**–ò—Ç–æ–≥–æ: 2 –Ω–æ–¥—ã –≤–º–µ—Å—Ç–æ 10!** üéâ

---

## ‚úÖ **–ß—Ç–æ –¥–∞–ª—å—à–µ?**

1. ‚úÖ –°–æ–∑–¥–∞–Ω —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω
2. üîÑ –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å `ReplyKeyboardHandler` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ `actions`
3. üîÑ –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å `InlineKeyboardHandler` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ `actions`
4. üîÑ –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –º–∞—Å—Å–∏–≤–∞ –¥–µ–π—Å—Ç–≤–∏–π
5. üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

**–°—Ç–∞—Ç—É—Å:** –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ P0

