# –ü–æ–ª–Ω—ã–π –≥–∞–π–¥ –ø–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Workflow

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
2. [–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ](#—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
3. [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-—É—Ä–æ–≤–Ω—è-–∏-–ø—Ä–æ–≥—Ä–µ—Å—Å–∞)
4. [–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ](#—Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
5. [–ò—Å—Ç–æ—Ä–∏—è –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏](#–∏—Å—Ç–æ—Ä–∏—è-–∏-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)
6. [–ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (2025-10-29)](#–Ω–æ–≤—ã–µ-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-2025-10-29)

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### –õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

```typescript
{user.id}                    // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ
{user.firstName}             // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
{user.lastName}              // –§–∞–º–∏–ª–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
{user.fullName}              // –ü–æ–ª–Ω–æ–µ –∏–º—è (–ò–º—è + –§–∞–º–∏–ª–∏—è)
{user.email}                 // Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
{user.phone}                 // –¢–µ–ª–µ—Ñ–æ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
{user.telegramId}            // Telegram ID
{user.telegramUsername}      // Telegram username (@username)
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```
üëã –ü—Ä–∏–≤–µ—Ç, {user.firstName}!

üìß Email: {user.email}
üìû –¢–µ–ª–µ—Ñ–æ–Ω: {user.phone}
üë§ Telegram: @{user.telegramUsername}
```

---

## –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### –ë–∞–ª–∞–Ω—Å –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```typescript
{user.balance}               // –ë–∞–ª–∞–Ω—Å (—á–∏—Å–ª–æ)
{user.balanceFormatted}      // "400 –±–æ–Ω—É—Å–æ–≤"
{user.totalEarned}           // –í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ (—á–∏—Å–ª–æ)
{user.totalEarnedFormatted}  // "1500 –±–æ–Ω—É—Å–æ–≤"
{user.totalSpent}            // –í—Å–µ–≥–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ (—á–∏—Å–ª–æ)
{user.totalSpentFormatted}   // "800 –±–æ–Ω—É—Å–æ–≤"
{user.totalPurchases}        // –°—É–º–º–∞ –ø–æ–∫—É–ø–æ–∫ (—á–∏—Å–ª–æ)
{user.totalPurchasesFormatted} // "5000 —Ä—É–±."
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```
üí∞ –í–∞—à –±–∞–ª–∞–Ω—Å: {user.balanceFormatted}

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
‚úÖ –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: {user.totalEarnedFormatted}
üí∏ –ü–æ—Ç—Ä–∞—á–µ–Ω–æ: {user.totalSpentFormatted}
üõí –ü–æ–∫—É–ø–æ–∫ –Ω–∞: {user.totalPurchasesFormatted}
```

### ‚ú® –ù–û–í–û–ï: –ò—Å—Ç–µ–∫–∞—é—â–∏–µ –±–æ–Ω—É—Å—ã

```typescript
{user.expiringBonuses}       // –ë–æ–Ω—É—Å—ã, –∏—Å—Ç–µ–∫–∞—é—â–∏–µ –≤ –±–ª–∏–∂–∞–π—à–∏–µ 30 –¥–Ω–µ–π (—á–∏—Å–ª–æ)
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```
‚ö†Ô∏è –ò—Å—Ç–µ–∫–∞–µ—Ç –≤ –±–ª–∏–∂–∞–π—à–∏–µ 30 –¥–Ω–µ–π: {user.expiringBonuses}‚ÇΩ

–ü–æ—Ç–æ—Ä–æ–ø–∏—Ç–µ—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö!
```

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

### –£—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```typescript
{user.currentLevel}          // "–ë–∞–∑–æ–≤—ã–π", "–°–µ—Ä–µ–±—Ä—è–Ω—ã–π", "–ó–æ–ª–æ—Ç–æ–π", "–ü–ª–∞—Ç–∏–Ω–æ–≤—ã–π"
```

### ‚ú® –ù–û–í–û–ï: –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —É—Ä–æ–≤–Ω—è

```typescript
{user.progressBar}           // –í–∏–∑—É–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
```

**–í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è**:
- `‚ñ∞‚ñ±‚ñ±‚ñ± (25%)` ‚Äî –ë–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å
- `‚ñ∞‚ñ∞‚ñ±‚ñ± (50%)` ‚Äî –°–µ—Ä–µ–±—Ä—è–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
- `‚ñ∞‚ñ∞‚ñ∞‚ñ± (75%)` ‚Äî –ó–æ–ª–æ—Ç–æ–π —É—Ä–æ–≤–µ–Ω—å
- `‚ñ∞‚ñ∞‚ñ∞‚ñ∞ (100%)` ‚Äî –ü–ª–∞—Ç–∏–Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```
üèÜ –í–∞—à —É—Ä–æ–≤–µ–Ω—å: {user.currentLevel}

–ü—Ä–æ–≥—Ä–µ—Å—Å: {user.progressBar}

–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –¥–µ–ª–∞—Ç—å –ø–æ–∫—É–ø–∫–∏ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è!
```

---

## –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

```typescript
{user.referralCode}          // –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
{user.referralCodeShort}     // –ö—Ä–∞—Ç–∫–∏–π –∫–æ–¥
{user.hasReferralCode}       // "–î–∞" –∏–ª–∏ "–ù–µ—Ç"
{user.referredBy}            // ID —Ä–µ—Ñ–µ—Ä–µ—Ä–∞
{user.referrerName}          // –ò–º—è —Ä–µ—Ñ–µ—Ä–µ—Ä–∞
```

### ‚ú® –ò–°–ü–†–ê–í–õ–ï–ù–û: –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞

```typescript
{user.referralLink}          // https://t.me/botusername?start=ref_CODE
```

**–†–∞–Ω—å—à–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ**: "–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ"  
**–¢–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç**: –†–µ–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –±–æ—Ç–∞!

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```
üîó –í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:

{user.referralLink}

üìù –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–¥: {user.referralCode}

üí° –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –µ–π —Å –¥—Ä—É–∑—å—è–º–∏:
‚úÖ –ó–∞ –∫–∞–∂–¥–æ–≥–æ –¥—Ä—É–≥–∞ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ 10% —Å –µ–≥–æ –ø–æ–∫—É–ø–æ–∫
‚úÖ –í–∞—à –¥—Ä—É–≥ –ø–æ–ª—É—á–∏—Ç 10% –±–æ–Ω—É—Å–æ–≤ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
```

---

## –ò—Å—Ç–æ—Ä–∏—è –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

### –°—á—ë—Ç—á–∏–∫–∏

```typescript
{user.transactionCount}      // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
{user.bonusCount}            // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–æ–Ω—É—Å–æ–≤
{user.hasTransactions}       // "–î–∞" –∏–ª–∏ "–ù–µ—Ç"
{user.hasBonuses}            // "–î–∞" –∏–ª–∏ "–ù–µ—Ç"
{user.isNewUser}             // "–î–∞" –∏–ª–∏ "–ù–µ—Ç"
```

### –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (–ø—Ä–æ—Å—Ç–∞—è)

```typescript
{user.transactionHistory}    // –ü–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (–±–∞–∑–æ–≤–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
{user.activeBonuses}         // –ê–∫—Ç–∏–≤–Ω—ã–µ –±–æ–Ω—É—Å—ã (–ø–µ—Ä–≤—ã–µ 3)
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ `transactionHistory`**:
```
+400 –±–æ–Ω—É—Å–æ–≤ - –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞ –ø–æ–∫—É–ø–∫—É (28 –æ–∫—Ç—è–±—Ä—è 2025 –≥., 12:30)
-200 –±–æ–Ω—É—Å–æ–≤ - –°–ø–∏—Å–∞–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤ (25 –æ–∫—Ç—è–±—Ä—è 2025 –≥., 15:45)
+100 –±–æ–Ω—É—Å–æ–≤ - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å (23 –æ–∫—Ç—è–±—Ä—è 2025 –≥., 09:10)
```

### ‚ú® –ù–û–í–û–ï: –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (–¥–µ—Ç–∞–ª—å–Ω–∞—è)

```typescript
{transactions.formatted}     // –ö—Ä–∞—Å–∏–≤–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —Å –∏–∫–æ–Ω–∫–∞–º–∏
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ `transactions.formatted`**:
```
1. üíö +400 ‚ÇΩ ‚Ä¢ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞ –ø–æ–∫—É–ø–∫—É
   üìÖ 28.10, 12:30

2. üí∏ -200 ‚ÇΩ ‚Ä¢ –°–ø–∏—Å–∞–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤
   üìÖ 25.10, 15:45

3. üíö +100 ‚ÇΩ ‚Ä¢ –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å
   üìÖ 23.10, 09:10
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```
üìú –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 10):

{transactions.formatted}
```

---

## –ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (2025-10-29)

### –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ |
|-----------|-----|----------|---------------|
| `{user.expiringBonuses}` | —á–∏—Å–ª–æ | –ë–æ–Ω—É—Å—ã, –∏—Å—Ç–µ–∫–∞—é—â–∏–µ –≤ –±–ª–∏–∂–∞–π—à–∏–µ 30 –¥–Ω–µ–π | `350` |
| `{user.progressBar}` | —Å—Ç—Ä–æ–∫–∞ | –í–∏–∑—É–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —É—Ä–æ–≤–Ω—è | `‚ñ∞‚ñ∞‚ñ±‚ñ± (50%)` |
| `{transactions.formatted}` | —Å—Ç—Ä–æ–∫–∞ | –î–µ—Ç–∞–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —Å –∏–∫–æ–Ω–∫–∞–º–∏ | –°–º. –≤—ã—à–µ |
| `{user.referralLink}` | —Å—Ç—Ä–æ–∫–∞ | **–ò–°–ü–†–ê–í–õ–ï–ù–û**: –†–µ–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –±–æ—Ç–∞ | `https://t.me/gupilbot?start=ref_ABC123` |

---

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Ñ–∏–ª—å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```
üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞–∑–∞–¥, {user.firstName}!

üí∞ –ë–æ–Ω—É—Å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞: {user.projectName}

üíµ –í–∞—à –±–∞–ª–∞–Ω—Å –±–æ–Ω—É—Å–æ–≤: {user.balanceFormatted}
üìä –í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: {user.totalEarnedFormatted}
üõí –ü–æ—Ç—Ä–∞—á–µ–Ω–æ: {user.totalSpentFormatted}
üèÜ –ò—Å—Ç–µ–∫–∞–µ—Ç –≤ –±–ª–∏–∂–∞–π—à–∏–µ 30 –¥–Ω–µ–π: {user.expiringBonuses}‚ÇΩ

üèÖ –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å: {user.currentLevel}
–ü—Ä–æ–≥—Ä–µ—Å—Å: {user.progressBar}
```

### –ü—Ä–∏–º–µ—Ä 2: –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–ª–∞–Ω—Å–µ

```
üí∞ –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–ª–∞–Ω—Å–µ

üíµ –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: {user.balanceFormatted}
üíö –í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: {user.totalEarnedFormatted}
üí∏ –í—Å–µ–≥–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ: {user.totalSpentFormatted}

‚è∞ –ò—Å—Ç–µ–∫–∞–µ—Ç –≤ –±–ª–∏–∂–∞–π—à–∏–µ 30 –¥–Ω–µ–π:
{user.expiringBonuses}‚ÇΩ

üìú –ê–∫—Ç–∏–≤–Ω—ã–µ –±–æ–Ω—É—Å—ã:
{user.activeBonuses}
```

### –ü—Ä–∏–º–µ—Ä 3: –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π

```
üìú –ò—Å—Ç–æ—Ä–∏—è –≤–∞—à–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

{transactions.formatted}

üìä –í—Å–µ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏–π: {user.transactionCount}
```

### –ü—Ä–∏–º–µ—Ä 4: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Ä–æ–≤–Ω–µ

```
üèÜ –í–∞—à —É—Ä–æ–≤–µ–Ω—å –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏

üéñÔ∏è –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å: {user.currentLevel}

–ü—Ä–æ–≥—Ä–µ—Å—Å: {user.progressBar}

üìà –£—Ä–æ–≤–Ω–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã:
‚Ä¢ –ë–∞–∑–æ–≤—ã–π: –ö—ç—à–±—ç–∫ 5%
‚Ä¢ –°–µ—Ä–µ–±—Ä—è–Ω—ã–π: –ö—ç—à–±—ç–∫ 7%
‚Ä¢ –ó–æ–ª–æ—Ç–æ–π: –ö—ç—à–±—ç–∫ 10%
‚Ä¢ –ü–ª–∞—Ç–∏–Ω–æ–≤—ã–π: –ö—ç—à–±—ç–∫ 15%

üí° –î–µ–ª–∞–π—Ç–µ –ø–æ–∫—É–ø–∫–∏, —á—Ç–æ–±—ã –ø–æ–≤—ã—Å–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å!
```

### –ü—Ä–∏–º–µ—Ä 5: –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞

```
üîó –í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞

{user.referralLink}

üìù –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–¥: {user.referralCode}

üí° –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –µ–π —Å –¥—Ä—É–∑—å—è–º–∏:
‚úÖ –ó–∞ –∫–∞–∂–¥–æ–≥–æ –¥—Ä—É–≥–∞ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ 10% —Å –µ–≥–æ –ø–æ–∫—É–ø–æ–∫
‚úÖ –í–∞—à –¥—Ä—É–≥ –ø–æ–ª—É—á–∏—Ç 10% –±–æ–Ω—É—Å–æ–≤ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

üë• –ü—Ä–∏–≥–ª–∞—Å–∏–ª –¥—Ä—É–∑–µ–π: {user.referredBy}
```

---

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ö–∞–∫ —Ä–µ–∑–æ–ª–≤—è—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ?

1. **Message Handler** (`message-handler.ts`) –≤—ã–∑—ã–≤–∞–µ—Ç `UserVariablesService.getUserVariables()`
2. **User Variables Service** (`user-variables.service.ts`) –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç:
   - `QueryExecutor.execute('get_user_profile')` ‚Üí –ø–æ–ª–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å
   - `QueryExecutor.execute('get_referral_link')` ‚Üí —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞
3. **Query Executor** (`query-executor.ts`) –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î —á–µ—Ä–µ–∑ Prisma
4. **–§–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã** –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –¥–∞–Ω–Ω—ã–µ:
   - `formatDate()` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç
   - `formatTransactionHistory()` ‚Äî –±–∞–∑–æ–≤–∞—è –∏—Å—Ç–æ—Ä–∏—è
   - `formatTransactionsDetailed()` ‚Äî –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —Å –∏–∫–æ–Ω–∫–∞–º–∏ ‚ú®
   - `generateProgressBar()` ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —É—Ä–æ–≤–Ω—è ‚ú®
5. **Project Variables Service** –∑–∞–º–µ–Ω—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Ç–µ–∫—Å—Ç–µ

### –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ?

```sql
-- –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
users {
  id, firstName, lastName, email, phone,
  telegramId, telegramUsername, isActive,
  currentLevel, referralCode, referredBy
}

-- –ë–æ–Ω—É—Å—ã
bonuses {
  userId, amount, type, description,
  expiresAt, createdAt
}

-- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
transactions {
  userId, amount, type, description,
  createdAt, isReferralBonus
}

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ (–¥–ª—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏)
bot_settings {
  projectId, botUsername
}
```

---

## Troubleshooting

### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ `{user.variable}`?

**–ü—Ä–∏—á–∏–Ω–∞**: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è  
**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `userId` –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ `user-variables.service.ts`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä (Ctrl+C ‚Üí `pnpm dev`)

### –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ"?

**–ü—Ä–∏—á–∏–Ω–∞**: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç `referralCode` –∏–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω `botUsername`  
**–†–µ—à–µ–Ω–∏–µ**:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `bot_settings` —É–∫–∞–∑–∞–Ω `botUsername`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω `referralCode`

### –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø—É—Å—Ç–∞—è?

**–ü—Ä–∏—á–∏–Ω–∞**: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π  
**–†–µ—à–µ–Ω–∏–µ**: –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏—Å—Ç–æ—Ä–∏—è –ø–æ—è–≤–∏—Ç—Å—è.

---

**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: 2025-10-29  
**–í–µ—Ä—Å–∏—è**: 3.0 (–¥–æ–±–∞–≤–ª–µ–Ω—ã `expiringBonuses`, `progressBar`, `transactions.formatted`, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ `referralLink`)

