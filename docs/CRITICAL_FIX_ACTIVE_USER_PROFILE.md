# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: active-user-profile ‚Üí end-node

**–î–∞—Ç–∞**: 2025-10-29  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–Ω–æ–ø–∫–∏ –º–µ–Ω—é —Ä–∞–±–æ—Ç–∞—é—Ç, –Ω–æ —Å–æ–∑–¥–∞—é—Ç **–Ω–æ–≤—ã–µ workflow executions** –≤–º–µ—Å—Ç–æ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ä–æ–≥–æ

---

## ‚ùå –ù–∞–π–¥–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

### –°–∏–º–ø—Ç–æ–º—ã:
```
/start ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚úÖ
–ù–∞–∂–∞—Ç–∏–µ "–ë–∞–ª–∞–Ω—Å" ‚Üí —Å–æ–∑–¥–∞—ë—Ç –ù–û–í–´–ô execution ‚ùå
–ù–∞–∂–∞—Ç–∏–µ "–ò—Å—Ç–æ—Ä–∏—è" ‚Üí —Å–æ–∑–¥–∞—ë—Ç –ï–©–Å –û–î–ò–ù –ù–û–í–´–ô execution ‚ùå
```

### –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏:
```
üöÄ EXECUTING WORKFLOW FROM NODE: active-user-profile
‚úÖ Node active-user-profile executed, nextNodeId: __WAITING_FOR_USER_INPUT__
üöÄ EXECUTING WORKFLOW FROM NODE: end-node  ‚Üê WORKFLOW –ó–ê–í–ï–†–®–ê–ï–¢–°–Ø!
‚úÖ Workflow completed successfully

<–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É>

üÜï Creating workflow execution with payload  ‚Üê –ù–û–í–´–ô EXECUTION!
üöÄ EXECUTING WORKFLOW FROM NODE: menu-balance-trigger
```

---

## üîç –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

–í —Ñ–∞–π–ª–µ `–°–∏—Å—Ç–µ–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è).json` –±—ã–ª–∞ –Ω–∞–π–¥–µ–Ω–∞ **—Å–∫—Ä—ã—Ç–∞—è –ø—Ä–æ–±–ª–µ–º–∞**:

```json
{
  "id": "edge-active-user-profile-end-node-1760624947132",
  "source": "active-user-profile",  ‚Üê –ì–õ–ê–í–ù–ê–Ø –ù–û–î–ê –ú–ï–ù–Æ!
  "target": "end-node"               ‚Üê –ó–ê–í–ï–†–®–ê–ï–¢ WORKFLOW!
}
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ?**

`active-user-profile` ‚Äî —ç—Ç–æ **–ü–ï–†–í–ê–Ø** message-–Ω–æ–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏ `/start`. –û–Ω–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏:
- üí∞ –ë–∞–ª–∞–Ω—Å
- üìú –ò—Å—Ç–æ—Ä–∏—è
- üèÜ –£—Ä–æ–≤–µ–Ω—å
- üë• –†–µ—Ñ–µ—Ä–∞–ª—ã
- üîó –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å
- ‚ùì –ü–æ–º–æ—â—å

–ï—Å–ª–∏ —ç—Ç–∞ –Ω–æ–¥–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ `end-node`, —Ç–æ workflow **–ó–ê–í–ï–†–®–ê–ï–¢–°–Ø –°–†–ê–ó–£** –ø–æ—Å–ª–µ –ø–æ–∫–∞–∑–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é. –õ—é–±–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ –∫–Ω–æ–ø–∫—É —Å–æ–∑–¥–∞—ë—Ç **–ù–û–í–´–ô** workflow execution.

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –£–¥–∞–ª–µ–Ω—ã 7 connections –∫ `end-node`:

1. **`edge-active-user-profile-end-node`** ‚Üê **–ì–õ–ê–í–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê!**
2. `edge-show-balance-details-end-node`
3. `edge-show-history-list-end-node`
4. `edge-show-level-info-end-node`
5. `edge-show-referrals-stats-end-node`
6. `edge-show-invite-link-end-node`
7. `edge-show-help-info-end-node`

### –û—Å—Ç–∞–ª–æ—Å—å 3 connections (–¥–ª—è –∑–∞–≤–µ—Ä—à–∞—é—â–∏—Ö –Ω–æ–¥):

- `already-active-message ‚Üí end-node` (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —É–∂–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞)
- `success-activated-user ‚Üí end-node` (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏)
- `website-registration-required ‚Üí end-node` (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ —Å–∞–π—Ç–µ)

---

## üìä –î–æ –∏ –ü–æ—Å–ª–µ

### –î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
/start ‚Üí workflow_execution_1 (status: waiting)
  ‚Üì
active-user-profile –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ–Ω—é
  ‚Üì
end-node –ó–ê–í–ï–†–®–ê–ï–¢ workflow_execution_1 (status: completed) ‚Üê –ó–ê–í–ï–†–®–Å–ù!
  ‚Üì
–ù–∞–∂–∞—Ç–∏–µ "–ë–∞–ª–∞–Ω—Å" ‚Üí workflow_execution_2 (status: waiting) ‚Üê –ù–û–í–´–ô!
  ‚Üì
–ù–∞–∂–∞—Ç–∏–µ "–ò—Å—Ç–æ—Ä–∏—è" ‚Üí workflow_execution_3 (status: waiting) ‚Üê –ï–©–Å –ù–û–í–´–ô!
```

### –ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
/start ‚Üí workflow_execution_1 (status: waiting)
  ‚Üì
active-user-profile –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ–Ω—é
  ‚Üì
workflow_execution_1 –û–°–¢–ê–Å–¢–°–Ø –í waiting state ‚Üê –û–°–¢–ê–Å–¢–°–Ø!
  ‚Üì
–ù–∞–∂–∞—Ç–∏–µ "–ë–∞–ª–∞–Ω—Å" ‚Üí workflow_execution_1 –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è ‚Üê –¢–û–¢ –ñ–ï!
  ‚Üì
–ù–∞–∂–∞—Ç–∏–µ "–ò—Å—Ç–æ—Ä–∏—è" ‚Üí workflow_execution_1 –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è ‚Üê –¢–û–¢ –ñ–ï!
  ‚Üì
–ù–∞–∂–∞—Ç–∏–µ "–£—Ä–æ–≤–µ–Ω—å" ‚Üí workflow_execution_1 –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è ‚Üê –¢–û–¢ –ñ–ï!
```

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:

‚úÖ `/start` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (workflow –æ—Å—Ç–∞—ë—Ç—Å—è –≤ `status: waiting`)  
‚úÖ –ù–∞–∂–∞—Ç–∏–µ **–ª—é–±–æ–π** –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é ‚Üí –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç **–¢–û–¢ –ñ–ï** execution  
‚úÖ –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é" ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ `active-user-profile`  
‚úÖ –í –ë–î —Å–æ–∑–¥–∞—ë—Ç—Å—è **–¢–û–õ–¨–ö–û –û–î–ò–ù** `workflow_execution` –¥–ª—è –≤—Å–µ–π —Å–µ—Å—Å–∏–∏ –º–µ–Ω—é  

---

## üöÄ –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### 1Ô∏è‚É£ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É Dashboard
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Workflows**
3. –ù–∞–π–¥–∏—Ç–µ workflow "–°–∏—Å—Ç–µ–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏"
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–ò–º–ø–æ—Ä—Ç"** –∏–ª–∏ **"–ó–∞–º–µ–Ω–∏—Ç—å"**
5. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª: `–°–∏—Å—Ç–µ–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è).json`
6. **–°–û–•–†–ê–ù–ò–¢–ï** –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 2Ô∏è‚É£ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä

```powershell
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä:
Ctrl+C

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ:
pnpm dev
```

### 3Ô∏è‚É£ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –ù–∞–∂–º–∏—Ç–µ **–ª—é–±—É—é** –∫–Ω–æ–ø–∫—É –º–µ–Ω—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, "üí∞ –ë–∞–ª–∞–Ω—Å")
4. –ù–∞–∂–º–∏—Ç–µ –¥—Ä—É–≥—É—é –∫–Ω–æ–ø–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, "üìú –ò—Å—Ç–æ—Ä–∏—è")
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ ‚Äî **–ù–ï** –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `Creating workflow execution with payload`
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î ‚Äî –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–¢–û–õ–¨–ö–û –û–î–ò–ù** `workflow_execution` —Å `status = 'waiting'`

---

## üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `–°–∏—Å—Ç–µ–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è).json` ‚Äî —É–¥–∞–ª–µ–Ω—ã 7 connections
2. `docs/changelog.md` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–ø–∏—Å—å –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
3. `docs/WORKFLOW_MENU_PERSISTENCE_FIX.md` ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω –æ—Ç—á—ë—Ç
4. `docs/CRITICAL_FIX_ACTIVE_USER_PROFILE.md` ‚Äî —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç

---

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
‚úÖ STEP 5: Executing node active-user-profile
‚úÖ Node active-user-profile executed, nextNodeId: __WAITING_FOR_USER_INPUT__
‚úÖ Workflow execution loop completed successfully

<–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ë–∞–ª–∞–Ω—Å">

‚úÖ checkAndResumeWaitingWorkflow: Found waiting execution: cmhbtqcrk0009v8ag1p8h58c7
‚úÖ RESUMING WORKFLOW FROM NODE: menu-balance-trigger  ‚Üê –í–û–ó–û–ë–ù–û–í–õ–ï–ù–ò–ï!
‚úÖ STEP 1: Executing node menu-balance-trigger
```

### –í –ª–æ–≥–∞—Ö –ù–ï –î–û–õ–ñ–ù–û –±—ã—Ç—å:

```
‚ùå Creating workflow execution with payload  ‚Üê –ù–ï–¢ –ù–û–í–´–• EXECUTIONS!
‚ùå Starting workflow execution with node: menu-balance-trigger
```

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω 2025-10-29 –≤ —Ä–∞–º–∫–∞—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –º–µ–Ω—é –¥–ª—è Telegram –±–æ—Ç–∞.*

