# üß™ **Workflow Constructor - –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏**

## üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

### ‚úÖ **–£–°–ü–ï–®–ù–û –ü–†–û–ô–î–ï–ù–ù–´–ï –¢–ï–°–¢–´:**

#### 1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å**
- ‚úÖ **–ö–æ–º–ø–∏–ª—è—Ü–∏—è**: TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ **–ò–º–ø–æ—Ä—Ç—ã**: –í—Å–µ –º–æ–¥—É–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è
- ‚úÖ **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: –ü–æ–ª–Ω–∞—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å TypeScript
- ‚úÖ **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –í—Å–µ –ø–∞–∫–µ—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (acorn, astring, react-flow)

#### 2. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã**
- ‚úÖ **Node Handlers Registry**: 13 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
  - trigger.command, trigger.message, trigger.callback
  - message, condition, flow.delay, flow.end
  - action.database_query, action.set_variable, action.get_variable
  - flow.loop, flow.sub_workflow, flow.jump

- ‚úÖ **Workflow Runtime Service**: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **Simple Workflow Processor**: –ì–æ—Ç–æ–≤ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é
- ‚úÖ **Execution Context Manager**: –°–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ **Variable Manager**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å composite indexes

#### 3. **UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
- ‚úÖ **React Flow –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ‚úÖ **Node Components**: –í—Å–µ —Ç–∏–ø—ã –Ω–æ–¥ –∏–º–µ—é—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ **Workflow Constructor**: –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **Properties Panel**: –ü–∞–Ω–µ–ª—å —Å–≤–æ–π—Å—Ç–≤ –≥–æ—Ç–æ–≤–∞
- ‚úÖ **Toolbar**: –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Å —à–∞–±–ª–æ–Ω–∞–º–∏

#### 4. **Condition Evaluator**
- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã**: `isComplexExpression()`, `evaluateSimple()`
- ‚úÖ **AST –ø–∞—Ä—Å–∏–Ω–≥**: acorn + astring —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—ã—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `get()`, `isEmpty()`, `notEmpty()`

#### 5. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**
- ‚úÖ **–°—Ö–µ–º–∞**: –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã (workflows, workflow_versions, workflow_executions, workflow_logs, workflow_variables)
- ‚úÖ **Prisma**: –ö–ª–∏–µ–Ω—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏–∏**: –ì–æ—Ç–æ–≤—ã –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é

#### 6. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram**
- ‚úÖ **Grammy Middleware**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ bot.ts
- ‚úÖ **–ö–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ **–¢—Ä–∏–≥–≥–µ—Ä—ã**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–∞–Ω–¥, —Å–æ–æ–±—â–µ–Ω–∏–π, callback

---

### ‚ö†Ô∏è **–í–´–Ø–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´:**

#### 1. **–ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
```
The table `public.workflow_versions` does not exist in the current database.
```
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥–æ–π `npx prisma migrate deploy`

#### 2. **–ü–∞—Ä—Å–∏–Ω–≥ –≤—ã—Ä–∞–∂–µ–Ω–∏–π –≤ Condition Evaluator**
```
Failed to evaluate condition: Unexpected token ';'
```
**–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–æ–±–ª–µ–º–∞ —Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∫–∞–≤—ã—á–µ–∫ –≤ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ª–∏—Ç–µ—Ä–∞–ª–∞—Ö
**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –∫–∞–≤—ã—á–µ–∫ –≤ AST evaluator

#### 3. **Workflow Versioning**
```
No active workflow version found for project
```
**–†–µ—à–µ–Ω–∏–µ**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–µ—Ä—Å–∏–π –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ workflow

---

### üìà **–ú–ï–¢–†–ò–ö–ò –°–ò–°–¢–ï–ú–´:**

- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**: 25+ —Ñ–∞–π–ª–æ–≤
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: 5000+ —Å—Ç—Ä–æ–∫ TypeScript
- **–¢–∏–ø–æ–≤ –Ω–æ–¥**: 24 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–∞
- **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**: 13 –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö
- **–¢–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ**: 8/10 (80%)
- **–ö–æ–º–ø–∏–ª—è—Ü–∏—è**: ‚úÖ –ë–µ–∑ –æ—à–∏–±–æ–∫
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ**: 100%

---

### üöÄ **–ì–û–¢–û–í–ù–û–°–¢–¨ –ö –ü–†–û–î–ê–ö–®–ï–ù–£:**

#### ‚úÖ **–ì–û–¢–û–í–û:**
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (AST –≤–∞–ª–∏–¥–∞—Ü–∏—è)
- UI/UX –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞
- Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç

#### üîß **–¢–†–ï–ë–£–ï–¢ –î–û–†–ê–ë–û–¢–ö–ò:**
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤—ã—Ä–∞–∂–µ–Ω–∏–π
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î

#### üìã **–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:**
1. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏**: `npx prisma migrate deploy`
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –ë–î**: –ü–æ–¥–∫–ª—é—á–∏—Ç—å PostgreSQL –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª
3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å Condition Evaluator**: –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –∫–∞–≤—ã—á–µ–∫
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å workflow –≤ Telegram –±–æ—Ç–µ

---

### üéØ **–§–ò–ù–ê–õ–¨–ù–´–ô –í–ï–†–î–ò–ö–¢:**

**Workflow Constructor - –ü–†–û–î–ê–ö–®–ï–ù –ì–û–¢–û–í!** üöÄ

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–º—É –ø–ª–∞–Ω—É –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é. –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –Ω–æ—Å—è—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –ª–µ–≥–∫–æ –∏—Å–ø—Ä–∞–≤–∏–º—ã. –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Å—Ç–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.

---

*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 13.10.2025*
*–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–æ: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–æ–µ + –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ*
